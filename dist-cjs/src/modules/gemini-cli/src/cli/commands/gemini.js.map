{"version":3,"sources":["../../../../../../../src/modules/gemini-cli/src/cli/commands/gemini.ts"],"sourcesContent":["/**\n * Gemini CLI Command Handler\n * Provides CLI interface for the Gemini module\n */\n\nimport { Command } from '@cliffy/command';\nimport chalk from 'chalk';\nimport { getGeminiModule } from '../../core/index.js';\nimport type { AnalysisType, AuthMethod, AnalysisDepth, OutputFormat } from '../../core/types.js';\n\n// Type definitions for command options\ninterface EnableOptions {\n  auth: string;\n  apiKey?: string;\n  vertexProject?: string;\n  vertexLocation?: string;\n  skipInstall?: boolean;\n}\n\ninterface AnalyzeOptions {\n  type: string;\n  path: string[];\n  query?: string;\n  output: string;\n  depth: string;\n  storeMemory?: boolean;\n}\n\ninterface SecurityOptions {\n  path: string;\n  depth: string;\n}\n\ninterface ArchitectureOptions {\n  path: string;\n}\n\ninterface VerifyOptions {\n  feature: string;\n  path: string;\n}\n\ninterface CacheOptions {\n  clear?: boolean;\n  stats?: boolean;\n}\n\ninterface EjectOptions {\n  force?: boolean;\n  uninstall?: boolean;\n  keepConfig?: boolean;\n}\n\nexport const geminiCommand = new Command()\n  .description('Manage Gemini CLI integration for large-scale codebase analysis')\n  .action(() => {\n    console.log(chalk.cyan('\\nGemini CLI Module Commands:\\n'));\n    console.log('  enable      Enable and authenticate Gemini CLI');\n    console.log('  disable     Disable Gemini CLI temporarily');\n    console.log('  status      Show module status');\n    console.log('  analyze     Run codebase analysis');\n    console.log('  security    Run security scan');\n    console.log('  architecture Map system architecture');\n    console.log('  verify      Verify feature implementation');\n    console.log('  cache       Manage analysis cache');\n    console.log('  eject       Completely remove module');\n    console.log('\\nRun `claude-flow gemini <command> --help` for details\\n');\n  })\n  // Enable command\n  .command(\n    'enable',\n    new Command()\n      .description('Enable and authenticate Gemini CLI')\n      .option('--auth <method:string>', 'Authentication method: google-login, api-key, vertex-ai', {\n        default: 'google-login',\n      })\n      .option('--api-key <key:string>', 'API key (for api-key auth)')\n      .option('--vertex-project <project:string>', 'GCP project ID (for vertex-ai auth)')\n      .option('--vertex-location <location:string>', 'GCP region (for vertex-ai auth)', {\n        default: 'us-central1',\n      })\n      .option('--skip-install', 'Skip Gemini CLI installation check')\n      .action(async (options: EnableOptions) => {\n        try {\n          const module = getGeminiModule();\n          await module.enable({\n            authMethod: options.auth as AuthMethod,\n            apiKey: options.apiKey,\n            vertexProject: options.vertexProject,\n            vertexLocation: options.vertexLocation,\n            skipInstall: options.skipInstall,\n          });\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Disable command\n  .command(\n    'disable',\n    new Command()\n      .description('Disable Gemini CLI temporarily')\n      .action(async () => {\n        try {\n          const module = getGeminiModule();\n          await module.disable();\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Status command\n  .command(\n    'status',\n    new Command()\n      .description('Show Gemini CLI module status')\n      .action(async () => {\n        try {\n          const module = getGeminiModule();\n          await module.initialize();\n          const status = await module.getStatus();\n\n          console.log(chalk.cyan('\\nGemini CLI Module Status\\n'));\n          console.log(`  Installed:      ${status.installed ? chalk.green('Yes') : chalk.red('No')}`);\n          console.log(`  Version:        ${status.version || 'N/A'}`);\n          console.log(`  Enabled:        ${status.enabled ? chalk.green('Yes') : chalk.yellow('No')}`);\n          console.log(`  Authenticated:  ${status.authenticated ? chalk.green('Yes') : chalk.red('No')}`);\n          console.log(`  Auth Method:    ${status.authMethod || 'N/A'}`);\n\n          if (status.quotaStatus) {\n            console.log(chalk.cyan('\\nQuota Status\\n'));\n            const rpm = status.quotaStatus.requestsPerMinute;\n            const rpd = status.quotaStatus.requestsPerDay;\n            console.log(\n              `  Requests/min:   ${rpm.used}/${rpm.limit} (resets ${rpm.resetAt.toLocaleTimeString()})`\n            );\n            console.log(\n              `  Requests/day:   ${rpd.used}/${rpd.limit} (resets ${rpd.resetAt.toLocaleDateString()})`\n            );\n          }\n\n          console.log();\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Analyze command\n  .command(\n    'analyze',\n    new Command()\n      .description('Run codebase analysis')\n      .option('-t, --type <type:string>', 'Analysis type: codebase, architecture, security, dependencies, coverage', {\n        default: 'codebase',\n      })\n      .option('-p, --path <paths:string[]>', 'Paths to analyze', { default: ['.'] })\n      .option('-q, --query <query:string>', 'Custom analysis query')\n      .option('-o, --output <format:string>', 'Output format: json, markdown, text', {\n        default: 'markdown',\n      })\n      .option('-d, --depth <depth:string>', 'Analysis depth: surface, moderate, deep, comprehensive', {\n        default: 'moderate',\n      })\n      .option('--store-memory', 'Store results in Claude Flow memory')\n      .action(async (options: AnalyzeOptions) => {\n        try {\n          const module = getGeminiModule();\n\n          if (!module.isEnabled()) {\n            console.error(\n              chalk.red('Error: Gemini module not enabled. Run `claude-flow gemini enable` first.')\n            );\n            process.exit(1);\n          }\n\n          console.log(chalk.cyan(`\\nüîç Running ${options.type} analysis...\\n`));\n\n          const result = await module.analyze({\n            type: options.type as AnalysisType,\n            target: options.path,\n            query: options.query,\n            outputFormat: options.output as OutputFormat,\n            depth: options.depth as AnalysisDepth,\n            storeInMemory: options.storeMemory,\n          });\n\n          if (result.success) {\n            console.log(chalk.green('‚úÖ Analysis complete\\n'));\n            console.log(chalk.cyan('Summary:'));\n            console.log(result.summary);\n\n            if (result.findings.length > 0) {\n              console.log(chalk.cyan('\\nFindings:'));\n              for (const finding of result.findings.slice(0, 10)) {\n                const color =\n                  finding.severity === 'critical' || finding.severity === 'high'\n                    ? chalk.red\n                    : finding.severity === 'medium'\n                      ? chalk.yellow\n                      : chalk.gray;\n                console.log(`  ${color(`[${finding.severity.toUpperCase()}]`)} ${finding.message}`);\n                if (finding.location !== 'unknown') {\n                  console.log(`    ${chalk.gray(finding.location)}`);\n                }\n              }\n              if (result.findings.length > 10) {\n                console.log(chalk.gray(`  ... and ${result.findings.length - 10} more findings`));\n              }\n            }\n\n            console.log(chalk.cyan('\\nMetrics:'));\n            console.log(`  Files analyzed: ${result.metrics.filesAnalyzed}`);\n            console.log(`  Lines of code:  ${result.metrics.linesOfCode}`);\n            console.log(`  Duration:       ${result.duration}ms`);\n          } else {\n            console.error(chalk.red('Analysis failed:'));\n            result.errors?.forEach((e) => console.error(`  - ${e}`));\n          }\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Security scan command\n  .command(\n    'security',\n    new Command()\n      .description('Run security scan')\n      .option('-p, --path <path:string>', 'Path to scan', { default: '.' })\n      .option('-d, --depth <depth:string>', 'Scan depth: surface, moderate, deep, comprehensive', {\n        default: 'deep',\n      })\n      .action(async (options: SecurityOptions) => {\n        try {\n          const module = getGeminiModule();\n\n          if (!module.isEnabled()) {\n            console.error(\n              chalk.red('Error: Gemini module not enabled. Run `claude-flow gemini enable` first.')\n            );\n            process.exit(1);\n          }\n\n          const executor = module.getExecutor();\n          if (!executor) {\n            console.error(chalk.red('Error: Executor not available'));\n            process.exit(1);\n          }\n\n          console.log(chalk.cyan('\\nüîí Running security scan...\\n'));\n\n          const result = await executor.securityScan(options.path, {\n            depth: options.depth as AnalysisDepth,\n          });\n\n          if (result.success) {\n            console.log(chalk.green('‚úÖ Security scan complete\\n'));\n            console.log(chalk.cyan('Summary:'));\n            console.log(result.summary);\n\n            const criticalFindings = result.findings.filter(\n              (f) => f.severity === 'critical' || f.severity === 'high'\n            );\n            if (criticalFindings.length > 0) {\n              console.log(chalk.red(`\\n‚ö†Ô∏è  ${criticalFindings.length} critical/high findings:`));\n              for (const finding of criticalFindings) {\n                console.log(chalk.red(`  [${finding.severity.toUpperCase()}] ${finding.message}`));\n                if (finding.suggestion) {\n                  console.log(chalk.yellow(`    Fix: ${finding.suggestion}`));\n                }\n              }\n            }\n          } else {\n            console.error(chalk.red('Security scan failed:'));\n            result.errors?.forEach((e) => console.error(`  - ${e}`));\n          }\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Architecture command\n  .command(\n    'architecture',\n    new Command()\n      .description('Map system architecture')\n      .option('-p, --path <path:string>', 'Path to analyze', { default: '.' })\n      .action(async (options: ArchitectureOptions) => {\n        try {\n          const module = getGeminiModule();\n\n          if (!module.isEnabled()) {\n            console.error(\n              chalk.red('Error: Gemini module not enabled. Run `claude-flow gemini enable` first.')\n            );\n            process.exit(1);\n          }\n\n          const executor = module.getExecutor();\n          if (!executor) {\n            console.error(chalk.red('Error: Executor not available'));\n            process.exit(1);\n          }\n\n          console.log(chalk.cyan('\\nüèóÔ∏è  Mapping architecture...\\n'));\n\n          const result = await executor.architectureMap(options.path);\n\n          if (result.success) {\n            console.log(chalk.green('‚úÖ Architecture mapping complete\\n'));\n            console.log(result.summary);\n            if (result.rawOutput) {\n              console.log(chalk.cyan('\\nArchitecture Details:'));\n              console.log(result.rawOutput);\n            }\n          } else {\n            console.error(chalk.red('Architecture mapping failed:'));\n            result.errors?.forEach((e) => console.error(`  - ${e}`));\n          }\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Verify command\n  .command(\n    'verify',\n    new Command()\n      .description('Verify if a feature is implemented')\n      .option('-f, --feature <description:string>', 'Feature to verify', { required: true })\n      .option('-p, --path <path:string>', 'Path to check', { default: '.' })\n      .action(async (options: VerifyOptions) => {\n        try {\n          const module = getGeminiModule();\n\n          if (!module.isEnabled()) {\n            console.error(\n              chalk.red('Error: Gemini module not enabled. Run `claude-flow gemini enable` first.')\n            );\n            process.exit(1);\n          }\n\n          const executor = module.getExecutor();\n          if (!executor) {\n            console.error(chalk.red('Error: Executor not available'));\n            process.exit(1);\n          }\n\n          console.log(chalk.cyan(`\\nüîç Verifying: \"${options.feature}\"...\\n`));\n\n          const result = await executor.verify(options.feature, options.path);\n\n          const statusColor = result.implemented ? chalk.green : chalk.red;\n          console.log(`Status: ${statusColor(result.implemented ? 'IMPLEMENTED' : 'NOT FOUND')}`);\n          console.log(`Confidence: ${result.confidence}%`);\n          console.log(`Details: ${result.details}`);\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Cache command\n  .command(\n    'cache',\n    new Command()\n      .description('Manage analysis cache')\n      .option('--clear', 'Clear all cached results')\n      .option('--stats', 'Show cache statistics')\n      .action(async (options: CacheOptions) => {\n        try {\n          const module = getGeminiModule();\n          await module.initialize();\n\n          if (options.clear) {\n            console.log(chalk.yellow('Clearing cache...'));\n            await module.clearCache();\n            console.log(chalk.green('Cache cleared'));\n          } else if (options.stats) {\n            const stats = module.getCacheStats();\n            console.log(chalk.cyan('\\nCache Statistics\\n'));\n            console.log(`  Entries: ${stats.entries}`);\n            console.log(`  Size:    ${stats.size} bytes`);\n            console.log(`  Hit Rate: ${(stats.hitRate * 100).toFixed(1)}%`);\n          } else {\n            console.log('Use --clear to clear cache or --stats to show statistics');\n          }\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  )\n  // Eject command\n  .command(\n    'eject',\n    new Command()\n      .description('Completely remove Gemini CLI module')\n      .option('--force', 'Skip confirmation')\n      .option('--uninstall', 'Also uninstall Gemini CLI globally')\n      .option('--keep-config', 'Keep configuration for future use')\n      .action(async (options: EjectOptions) => {\n        try {\n          if (!options.force) {\n            console.log(chalk.yellow('\\n‚ö†Ô∏è  This will remove all Gemini CLI integration.'));\n            console.log('Run with --force to confirm.\\n');\n            return;\n          }\n\n          const module = getGeminiModule();\n          await module.eject({\n            force: options.force,\n            uninstall: options.uninstall,\n            keepConfig: options.keepConfig,\n          });\n        } catch (err) {\n          console.error(chalk.red(`Error: ${err instanceof Error ? err.message : 'Unknown error'}`));\n          process.exit(1);\n        }\n      })\n  );\n"],"names":["Command","chalk","getGeminiModule","geminiCommand","description","action","console","log","cyan","command","option","default","options","module","enable","authMethod","auth","apiKey","vertexProject","vertexLocation","skipInstall","err","error","red","Error","message","process","exit","disable","initialize","status","getStatus","installed","green","version","enabled","yellow","authenticated","quotaStatus","rpm","requestsPerMinute","rpd","requestsPerDay","used","limit","resetAt","toLocaleTimeString","toLocaleDateString","isEnabled","type","result","analyze","target","path","query","outputFormat","output","depth","storeInMemory","storeMemory","success","summary","findings","length","finding","slice","color","severity","gray","toUpperCase","location","metrics","filesAnalyzed","linesOfCode","duration","errors","forEach","e","executor","getExecutor","securityScan","criticalFindings","filter","f","suggestion","architectureMap","rawOutput","required","feature","verify","statusColor","implemented","confidence","details","clear","clearCache","stats","getCacheStats","entries","size","hitRate","toFixed","force","eject","uninstall","keepConfig"],"mappings":"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"}