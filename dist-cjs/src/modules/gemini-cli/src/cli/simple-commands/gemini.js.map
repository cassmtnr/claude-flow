{"version":3,"sources":["../../../../../../../src/modules/gemini-cli/src/cli/simple-commands/gemini.js"],"sourcesContent":["// gemini.js - Gemini CLI module management commands\nimport { printSuccess, printError, printWarning, printInfo } from '../../../../../cli/utils.js';\n\nexport async function geminiCommand(subArgs, flags) {\n  const geminiCmd = subArgs[0];\n\n  switch (geminiCmd) {\n    case 'enable':\n      await enableGemini(subArgs, flags);\n      break;\n\n    case 'disable':\n      await disableGemini(subArgs, flags);\n      break;\n\n    case 'status':\n      await showGeminiStatus(subArgs, flags);\n      break;\n\n    case 'analyze':\n      await runAnalysis(subArgs, flags);\n      break;\n\n    case 'security':\n      await runSecurityScan(subArgs, flags);\n      break;\n\n    case 'architecture':\n      await runArchitectureMap(subArgs, flags);\n      break;\n\n    case 'verify':\n      await verifyFeature(subArgs, flags);\n      break;\n\n    case 'cache':\n      await manageCache(subArgs, flags);\n      break;\n\n    case 'eject':\n      await ejectModule(subArgs, flags);\n      break;\n\n    default:\n      showGeminiHelp();\n  }\n}\n\nasync function getGeminiModule() {\n  // Import from the module root which has the JS bridge\n  const { getGeminiModule } = await import('../../../index.js');\n  return getGeminiModule();\n}\n\nasync function enableGemini(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n\n    const authMethod = flags.auth || 'google-login';\n    const apiKey = flags.apiKey || flags['api-key'];\n    const vertexProject = flags.vertexProject || flags['vertex-project'];\n    const vertexLocation = flags.vertexLocation || flags['vertex-location'] || 'us-central1';\n    const skipInstall = flags.skipInstall || flags['skip-install'];\n\n    await module.enable({\n      authMethod,\n      apiKey,\n      vertexProject,\n      vertexLocation,\n      skipInstall,\n    });\n  } catch (err) {\n    printError(`Failed to enable Gemini: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function disableGemini(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.disable();\n  } catch (err) {\n    printError(`Failed to disable Gemini: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function showGeminiStatus(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.initialize();\n    const status = await module.getStatus();\n\n    console.log('\\nðŸ¤– Gemini CLI Module Status\\n');\n    console.log(`  Installed:      ${status.installed ? 'âœ… Yes' : 'âŒ No'}`);\n    console.log(`  Version:        ${status.version || 'N/A'}`);\n    console.log(`  Enabled:        ${status.enabled ? 'âœ… Yes' : 'âš ï¸  No'}`);\n    console.log(`  Authenticated:  ${status.authenticated ? 'âœ… Yes' : 'âŒ No'}`);\n    console.log(`  Auth Method:    ${status.authMethod || 'N/A'}`);\n\n    if (status.quotaStatus) {\n      console.log('\\nðŸ“Š Quota Status\\n');\n      const rpm = status.quotaStatus.requestsPerMinute;\n      const rpd = status.quotaStatus.requestsPerDay;\n      console.log(\n        `  Requests/min:   ${rpm.used}/${rpm.limit} (resets ${rpm.resetAt.toLocaleTimeString()})`\n      );\n      console.log(\n        `  Requests/day:   ${rpd.used}/${rpd.limit} (resets ${rpd.resetAt.toLocaleDateString()})`\n      );\n    }\n\n    console.log();\n  } catch (err) {\n    printError(`Failed to get status: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function runAnalysis(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.initialize();\n\n    if (!module.isEnabled()) {\n      printError('Gemini module not enabled. Run `claude-flow gemini enable` first.');\n      process.exit(1);\n    }\n\n    const analysisType = flags.type || flags.t || 'codebase';\n    const paths = flags.path || flags.p || ['.'];\n    const query = flags.query || flags.q;\n    const outputFormat = flags.output || flags.o || 'markdown';\n    const depth = flags.depth || flags.d || 'moderate';\n    const storeInMemory = flags.storeMemory || flags['store-memory'];\n\n    console.log(`\\nðŸ” Running ${analysisType} analysis...\\n`);\n\n    const result = await module.analyze({\n      type: analysisType,\n      target: Array.isArray(paths) ? paths : [paths],\n      query,\n      outputFormat,\n      depth,\n      storeInMemory,\n    });\n\n    if (result.success) {\n      printSuccess('Analysis complete\\n');\n      console.log('ðŸ“‹ Summary:');\n      console.log(result.summary);\n\n      if (result.findings.length > 0) {\n        console.log('\\nðŸ”Ž Findings:');\n        for (const finding of result.findings.slice(0, 10)) {\n          const severityIcon =\n            finding.severity === 'critical' || finding.severity === 'high'\n              ? 'ðŸ”´'\n              : finding.severity === 'medium'\n                ? 'ðŸŸ¡'\n                : 'âšª';\n          console.log(`  ${severityIcon} [${finding.severity.toUpperCase()}] ${finding.message}`);\n          if (finding.location) {\n            console.log(`     ðŸ“ ${finding.location}`);\n          }\n        }\n        if (result.findings.length > 10) {\n          console.log(`  ... and ${result.findings.length - 10} more findings`);\n        }\n      }\n\n      console.log('\\nðŸ“Š Metrics:');\n      console.log(`  Files analyzed: ${result.metrics.filesAnalyzed || 'N/A'}`);\n      console.log(`  Analysis type:  ${result.metrics.analysisType || 'codebase'}`);\n      console.log(`  Model:          ${result.metrics.model || 'gemini-2.5-pro'}`);\n      console.log(`  Duration:       ${(result.duration / 1000).toFixed(1)}s`);\n    } else {\n      printError('Analysis failed:');\n      result.errors?.forEach((err) => console.error(`  - ${err}`));\n    }\n  } catch (err) {\n    printError(`Analysis failed: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function runSecurityScan(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.initialize();\n\n    if (!module.isEnabled()) {\n      printError('Gemini module not enabled. Run `claude-flow gemini enable` first.');\n      process.exit(1);\n    }\n\n    const targetPath = flags.path || flags.p || '.';\n    const depth = flags.depth || flags.d || 'deep';\n\n    console.log('\\nðŸ”’ Running security scan...\\n');\n\n    // Use analyze with security type\n    const result = await module.analyze({\n      type: 'security',\n      target: [targetPath],\n      depth,\n    });\n\n    if (result.success) {\n      printSuccess('Security scan complete\\n');\n      console.log('ðŸ“‹ Summary:');\n      console.log(result.summary);\n\n      const criticalFindings = result.findings.filter(\n        (f) => f.severity === 'critical' || f.severity === 'high'\n      );\n      if (criticalFindings.length > 0) {\n        console.log(`\\nâš ï¸  ${criticalFindings.length} critical/high findings:`);\n        for (const finding of criticalFindings) {\n          console.log(`  ðŸ”´ [${finding.severity.toUpperCase()}] ${finding.message}`);\n          if (finding.location) {\n            console.log(`     ðŸ“ ${finding.location}`);\n          }\n        }\n      } else {\n        printSuccess('No critical or high severity issues found!');\n      }\n\n      console.log('\\nðŸ“Š Metrics:');\n      console.log(`  Duration: ${(result.duration / 1000).toFixed(1)}s`);\n    } else {\n      printError('Security scan failed:');\n      result.errors?.forEach((err) => console.error(`  - ${err}`));\n    }\n  } catch (err) {\n    printError(`Security scan failed: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function runArchitectureMap(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.initialize();\n\n    if (!module.isEnabled()) {\n      printError('Gemini module not enabled. Run `claude-flow gemini enable` first.');\n      process.exit(1);\n    }\n\n    const targetPath = flags.path || flags.p || '.';\n    const depth = flags.depth || flags.d || 'moderate';\n\n    console.log('\\nðŸ—ï¸  Mapping architecture...\\n');\n\n    // Use analyze with architecture type\n    const result = await module.analyze({\n      type: 'architecture',\n      target: [targetPath],\n      depth,\n    });\n\n    if (result.success) {\n      printSuccess('Architecture mapping complete\\n');\n      console.log('ðŸ“‹ Summary:');\n      console.log(result.summary);\n\n      if (result.findings.length > 0) {\n        console.log('\\nðŸ“ Components:');\n        for (const finding of result.findings.slice(0, 15)) {\n          console.log(`  â€¢ ${finding.message}`);\n          if (finding.location) {\n            console.log(`    ðŸ“ ${finding.location}`);\n          }\n        }\n        if (result.findings.length > 15) {\n          console.log(`  ... and ${result.findings.length - 15} more components`);\n        }\n      }\n\n      console.log('\\nðŸ“Š Metrics:');\n      console.log(`  Duration: ${(result.duration / 1000).toFixed(1)}s`);\n    } else {\n      printError('Architecture mapping failed:');\n      result.errors?.forEach((err) => console.error(`  - ${err}`));\n    }\n  } catch (err) {\n    printError(`Architecture mapping failed: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function verifyFeature(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.initialize();\n\n    if (!module.isEnabled()) {\n      printError('Gemini module not enabled. Run `claude-flow gemini enable` first.');\n      process.exit(1);\n    }\n\n    const feature = flags.feature || flags.f;\n    const targetPath = flags.path || flags.p || '.';\n\n    if (!feature) {\n      printError('Feature description required. Use --feature or -f');\n      process.exit(1);\n    }\n\n    console.log(`\\nðŸ” Verifying: \"${feature}\"...\\n`);\n\n    // Use analyze with custom query for verification\n    const result = await module.analyze({\n      type: 'codebase',\n      target: [targetPath],\n      query: `Verify if this feature is implemented: \"${feature}\".\n              Look for evidence of implementation including:\n              - Related functions, classes, or modules\n              - Tests that cover this functionality\n              - Configuration or settings related to the feature\n\n              Respond with:\n              1. IMPLEMENTED or NOT_FOUND status\n              2. Confidence level (0-100%)\n              3. Evidence of implementation (file paths, function names)\n              4. Any gaps or missing pieces`,\n      depth: 'moderate',\n    });\n\n    if (result.success) {\n      // Try to parse implementation status from the response\n      const responseText = result.summary.toLowerCase();\n      const implemented = responseText.includes('implemented') && !responseText.includes('not implemented') && !responseText.includes('not_found');\n\n      // Try to extract confidence\n      const confidenceMatch = result.summary.match(/(\\d{1,3})%/);\n      const confidence = confidenceMatch ? parseInt(confidenceMatch[1]) : (implemented ? 75 : 25);\n\n      const statusIcon = implemented ? 'âœ…' : 'âŒ';\n      console.log(`Status: ${statusIcon} ${implemented ? 'IMPLEMENTED' : 'NOT FOUND'}`);\n      console.log(`Confidence: ${confidence}%`);\n      console.log(`\\nðŸ“‹ Details:`);\n      console.log(result.summary);\n\n      if (result.findings.length > 0) {\n        console.log('\\nðŸ”Ž Evidence:');\n        for (const finding of result.findings.slice(0, 5)) {\n          console.log(`  â€¢ ${finding.message}`);\n          if (finding.location) {\n            console.log(`    ðŸ“ ${finding.location}`);\n          }\n        }\n      }\n\n      console.log(`\\nðŸ“Š Duration: ${(result.duration / 1000).toFixed(1)}s`);\n    } else {\n      printError('Verification failed:');\n      result.errors?.forEach((err) => console.error(`  - ${err}`));\n    }\n  } catch (err) {\n    printError(`Verification failed: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function manageCache(subArgs, flags) {\n  try {\n    const module = await getGeminiModule();\n    await module.initialize();\n\n    if (flags.clear) {\n      printWarning('Clearing cache...');\n      await module.clearCache();\n      printSuccess('Cache cleared');\n    } else if (flags.stats) {\n      const stats = module.getCacheStats();\n      console.log('\\nðŸ“¦ Cache Statistics\\n');\n      console.log(`  Entries:   ${stats.entries}`);\n      console.log(`  Size:      ${stats.size} bytes`);\n      console.log(`  Hit Rate:  ${(stats.hitRate * 100).toFixed(1)}%`);\n    } else {\n      console.log('Use --clear to clear cache or --stats to show statistics');\n    }\n  } catch (err) {\n    printError(`Cache operation failed: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nasync function ejectModule(subArgs, flags) {\n  try {\n    if (!flags.force) {\n      printWarning('This will remove all Gemini CLI integration.');\n      console.log('Run with --force to confirm.\\n');\n      return;\n    }\n\n    const module = await getGeminiModule();\n    await module.eject({\n      force: flags.force,\n      uninstall: flags.uninstall,\n      keepConfig: flags.keepConfig || flags['keep-config'],\n    });\n  } catch (err) {\n    printError(`Eject failed: ${err.message}`);\n    process.exit(1);\n  }\n}\n\nfunction showGeminiHelp() {\n  console.log(`\nðŸ¤– Gemini CLI Module - Large-scale codebase analysis with 1M+ token context\n\nUSAGE:\n  claude-flow gemini <command> [options]\n\nCOMMANDS:\n  enable        Enable and authenticate Gemini CLI\n  disable       Disable Gemini CLI temporarily\n  status        Show module status and quota\n  analyze       Run codebase analysis\n  security      Run security vulnerability scan\n  architecture  Map system architecture\n  verify        Verify feature implementation\n  cache         Manage analysis cache\n  eject         Completely remove module\n\nENABLE OPTIONS:\n  --auth <method>           Authentication: google-login, api-key, vertex-ai (default: google-login)\n  --api-key <key>           API key for api-key authentication\n  --vertex-project <id>     GCP project ID for Vertex AI\n  --vertex-location <loc>   GCP region (default: us-central1)\n  --skip-install            Skip Gemini CLI installation check\n\nANALYZE OPTIONS:\n  -t, --type <type>         Analysis type: codebase, architecture, security, dependencies, coverage\n  -p, --path <paths>        Paths to analyze (default: .)\n  -q, --query <query>       Custom analysis query\n  -o, --output <format>     Output: json, markdown, text (default: markdown)\n  -d, --depth <depth>       Depth: surface, moderate, deep, comprehensive (default: moderate)\n  --store-memory            Store results in Claude Flow memory\n\nVERIFY OPTIONS:\n  -f, --feature <desc>      Feature description to verify (required)\n  -p, --path <path>         Path to check (default: .)\n\nCACHE OPTIONS:\n  --clear                   Clear all cached results\n  --stats                   Show cache statistics\n\nEJECT OPTIONS:\n  --force                   Skip confirmation\n  --uninstall               Also uninstall Gemini CLI globally\n  --keep-config             Keep configuration for future use\n\nEXAMPLES:\n  claude-flow gemini enable --auth api-key --api-key YOUR_KEY\n  claude-flow gemini status\n  claude-flow gemini analyze --type security --path ./src\n  claude-flow gemini verify --feature \"user authentication\"\n  claude-flow gemini cache --stats\n`);\n}\n"],"names":["printSuccess","printError","printWarning","geminiCommand","subArgs","flags","geminiCmd","enableGemini","disableGemini","showGeminiStatus","runAnalysis","runSecurityScan","runArchitectureMap","verifyFeature","manageCache","ejectModule","showGeminiHelp","getGeminiModule","module","authMethod","auth","apiKey","vertexProject","vertexLocation","skipInstall","enable","err","message","process","exit","disable","initialize","status","getStatus","console","log","installed","version","enabled","authenticated","quotaStatus","rpm","requestsPerMinute","rpd","requestsPerDay","used","limit","resetAt","toLocaleTimeString","toLocaleDateString","isEnabled","analysisType","type","t","paths","path","p","query","q","outputFormat","output","o","depth","d","storeInMemory","storeMemory","result","analyze","target","Array","isArray","success","summary","findings","length","finding","slice","severityIcon","severity","toUpperCase","location","metrics","filesAnalyzed","model","duration","toFixed","errors","forEach","error","targetPath","criticalFindings","filter","f","feature","responseText","toLowerCase","implemented","includes","confidenceMatch","match","confidence","parseInt","statusIcon","clear","clearCache","stats","getCacheStats","entries","size","hitRate","force","eject","uninstall","keepConfig"],"mappings":"AACA,SAASA,YAAY,EAAEC,UAAU,EAAEC,YAAY,QAAmB,8BAA8B;AAEhG,OAAO,eAAeC,cAAcC,OAAO,EAAEC,KAAK;IAChD,MAAMC,YAAYF,OAAO,CAAC,EAAE;IAE5B,OAAQE;QACN,KAAK;YACH,MAAMC,aAAaH,SAASC;YAC5B;QAEF,KAAK;YACH,MAAMG,cAAcJ,SAASC;YAC7B;QAEF,KAAK;YACH,MAAMI,iBAAiBL,SAASC;YAChC;QAEF,KAAK;YACH,MAAMK,YAAYN,SAASC;YAC3B;QAEF,KAAK;YACH,MAAMM,gBAAgBP,SAASC;YAC/B;QAEF,KAAK;YACH,MAAMO,mBAAmBR,SAASC;YAClC;QAEF,KAAK;YACH,MAAMQ,cAAcT,SAASC;YAC7B;QAEF,KAAK;YACH,MAAMS,YAAYV,SAASC;YAC3B;QAEF,KAAK;YACH,MAAMU,YAAYX,SAASC;YAC3B;QAEF;YACEW;IACJ;AACF;AAEA,eAAeC;IAEb,MAAM,EAAEA,eAAe,EAAE,GAAG,MAAM,MAAM,CAAC;IACzC,OAAOA;AACT;AAEA,eAAeV,aAAaH,OAAO,EAAEC,KAAK;IACxC,IAAI;QACF,MAAMa,SAAS,MAAMD;QAErB,MAAME,aAAad,MAAMe,IAAI,IAAI;QACjC,MAAMC,SAAShB,MAAMgB,MAAM,IAAIhB,KAAK,CAAC,UAAU;QAC/C,MAAMiB,gBAAgBjB,MAAMiB,aAAa,IAAIjB,KAAK,CAAC,iBAAiB;QACpE,MAAMkB,iBAAiBlB,MAAMkB,cAAc,IAAIlB,KAAK,CAAC,kBAAkB,IAAI;QAC3E,MAAMmB,cAAcnB,MAAMmB,WAAW,IAAInB,KAAK,CAAC,eAAe;QAE9D,MAAMa,OAAOO,MAAM,CAAC;YAClBN;YACAE;YACAC;YACAC;YACAC;QACF;IACF,EAAE,OAAOE,KAAK;QACZzB,WAAW,CAAC,yBAAyB,EAAEyB,IAAIC,OAAO,EAAE;QACpDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAerB,cAAcJ,OAAO,EAAEC,KAAK;IACzC,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOY,OAAO;IACtB,EAAE,OAAOJ,KAAK;QACZzB,WAAW,CAAC,0BAA0B,EAAEyB,IAAIC,OAAO,EAAE;QACrDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAepB,iBAAiBL,OAAO,EAAEC,KAAK;IAC5C,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOa,UAAU;QACvB,MAAMC,SAAS,MAAMd,OAAOe,SAAS;QAErCC,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEH,OAAOI,SAAS,GAAG,UAAU,QAAQ;QACtEF,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEH,OAAOK,OAAO,IAAI,OAAO;QAC1DH,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEH,OAAOM,OAAO,GAAG,UAAU,UAAU;QACtEJ,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEH,OAAOO,aAAa,GAAG,UAAU,QAAQ;QAC1EL,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEH,OAAOb,UAAU,IAAI,OAAO;QAE7D,IAAIa,OAAOQ,WAAW,EAAE;YACtBN,QAAQC,GAAG,CAAC;YACZ,MAAMM,MAAMT,OAAOQ,WAAW,CAACE,iBAAiB;YAChD,MAAMC,MAAMX,OAAOQ,WAAW,CAACI,cAAc;YAC7CV,QAAQC,GAAG,CACT,CAAC,kBAAkB,EAAEM,IAAII,IAAI,CAAC,CAAC,EAAEJ,IAAIK,KAAK,CAAC,SAAS,EAAEL,IAAIM,OAAO,CAACC,kBAAkB,GAAG,CAAC,CAAC;YAE3Fd,QAAQC,GAAG,CACT,CAAC,kBAAkB,EAAEQ,IAAIE,IAAI,CAAC,CAAC,EAAEF,IAAIG,KAAK,CAAC,SAAS,EAAEH,IAAII,OAAO,CAACE,kBAAkB,GAAG,CAAC,CAAC;QAE7F;QAEAf,QAAQC,GAAG;IACb,EAAE,OAAOT,KAAK;QACZzB,WAAW,CAAC,sBAAsB,EAAEyB,IAAIC,OAAO,EAAE;QACjDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAenB,YAAYN,OAAO,EAAEC,KAAK;IACvC,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOa,UAAU;QAEvB,IAAI,CAACb,OAAOgC,SAAS,IAAI;YACvBjD,WAAW;YACX2B,QAAQC,IAAI,CAAC;QACf;QAEA,MAAMsB,eAAe9C,MAAM+C,IAAI,IAAI/C,MAAMgD,CAAC,IAAI;QAC9C,MAAMC,QAAQjD,MAAMkD,IAAI,IAAIlD,MAAMmD,CAAC,IAAI;YAAC;SAAI;QAC5C,MAAMC,QAAQpD,MAAMoD,KAAK,IAAIpD,MAAMqD,CAAC;QACpC,MAAMC,eAAetD,MAAMuD,MAAM,IAAIvD,MAAMwD,CAAC,IAAI;QAChD,MAAMC,QAAQzD,MAAMyD,KAAK,IAAIzD,MAAM0D,CAAC,IAAI;QACxC,MAAMC,gBAAgB3D,MAAM4D,WAAW,IAAI5D,KAAK,CAAC,eAAe;QAEhE6B,QAAQC,GAAG,CAAC,CAAC,aAAa,EAAEgB,aAAa,cAAc,CAAC;QAExD,MAAMe,SAAS,MAAMhD,OAAOiD,OAAO,CAAC;YAClCf,MAAMD;YACNiB,QAAQC,MAAMC,OAAO,CAAChB,SAASA,QAAQ;gBAACA;aAAM;YAC9CG;YACAE;YACAG;YACAE;QACF;QAEA,IAAIE,OAAOK,OAAO,EAAE;YAClBvE,aAAa;YACbkC,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC+B,OAAOM,OAAO;YAE1B,IAAIN,OAAOO,QAAQ,CAACC,MAAM,GAAG,GAAG;gBAC9BxC,QAAQC,GAAG,CAAC;gBACZ,KAAK,MAAMwC,WAAWT,OAAOO,QAAQ,CAACG,KAAK,CAAC,GAAG,IAAK;oBAClD,MAAMC,eACJF,QAAQG,QAAQ,KAAK,cAAcH,QAAQG,QAAQ,KAAK,SACpD,OACAH,QAAQG,QAAQ,KAAK,WACnB,OACA;oBACR5C,QAAQC,GAAG,CAAC,CAAC,EAAE,EAAE0C,aAAa,EAAE,EAAEF,QAAQG,QAAQ,CAACC,WAAW,GAAG,EAAE,EAAEJ,QAAQhD,OAAO,EAAE;oBACtF,IAAIgD,QAAQK,QAAQ,EAAE;wBACpB9C,QAAQC,GAAG,CAAC,CAAC,QAAQ,EAAEwC,QAAQK,QAAQ,EAAE;oBAC3C;gBACF;gBACA,IAAId,OAAOO,QAAQ,CAACC,MAAM,GAAG,IAAI;oBAC/BxC,QAAQC,GAAG,CAAC,CAAC,UAAU,EAAE+B,OAAOO,QAAQ,CAACC,MAAM,GAAG,GAAG,cAAc,CAAC;gBACtE;YACF;YAEAxC,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAE+B,OAAOe,OAAO,CAACC,aAAa,IAAI,OAAO;YACxEhD,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAE+B,OAAOe,OAAO,CAAC9B,YAAY,IAAI,YAAY;YAC5EjB,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAE+B,OAAOe,OAAO,CAACE,KAAK,IAAI,kBAAkB;YAC3EjD,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAE,AAAC+B,CAAAA,OAAOkB,QAAQ,GAAG,IAAG,EAAGC,OAAO,CAAC,GAAG,CAAC,CAAC;QACzE,OAAO;YACLpF,WAAW;YACXiE,OAAOoB,MAAM,EAAEC,QAAQ,CAAC7D,MAAQQ,QAAQsD,KAAK,CAAC,CAAC,IAAI,EAAE9D,KAAK;QAC5D;IACF,EAAE,OAAOA,KAAK;QACZzB,WAAW,CAAC,iBAAiB,EAAEyB,IAAIC,OAAO,EAAE;QAC5CC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAelB,gBAAgBP,OAAO,EAAEC,KAAK;IAC3C,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOa,UAAU;QAEvB,IAAI,CAACb,OAAOgC,SAAS,IAAI;YACvBjD,WAAW;YACX2B,QAAQC,IAAI,CAAC;QACf;QAEA,MAAM4D,aAAapF,MAAMkD,IAAI,IAAIlD,MAAMmD,CAAC,IAAI;QAC5C,MAAMM,QAAQzD,MAAMyD,KAAK,IAAIzD,MAAM0D,CAAC,IAAI;QAExC7B,QAAQC,GAAG,CAAC;QAGZ,MAAM+B,SAAS,MAAMhD,OAAOiD,OAAO,CAAC;YAClCf,MAAM;YACNgB,QAAQ;gBAACqB;aAAW;YACpB3B;QACF;QAEA,IAAII,OAAOK,OAAO,EAAE;YAClBvE,aAAa;YACbkC,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC+B,OAAOM,OAAO;YAE1B,MAAMkB,mBAAmBxB,OAAOO,QAAQ,CAACkB,MAAM,CAC7C,CAACC,IAAMA,EAAEd,QAAQ,KAAK,cAAcc,EAAEd,QAAQ,KAAK;YAErD,IAAIY,iBAAiBhB,MAAM,GAAG,GAAG;gBAC/BxC,QAAQC,GAAG,CAAC,CAAC,MAAM,EAAEuD,iBAAiBhB,MAAM,CAAC,wBAAwB,CAAC;gBACtE,KAAK,MAAMC,WAAWe,iBAAkB;oBACtCxD,QAAQC,GAAG,CAAC,CAAC,MAAM,EAAEwC,QAAQG,QAAQ,CAACC,WAAW,GAAG,EAAE,EAAEJ,QAAQhD,OAAO,EAAE;oBACzE,IAAIgD,QAAQK,QAAQ,EAAE;wBACpB9C,QAAQC,GAAG,CAAC,CAAC,QAAQ,EAAEwC,QAAQK,QAAQ,EAAE;oBAC3C;gBACF;YACF,OAAO;gBACLhF,aAAa;YACf;YAEAkC,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAE,AAAC+B,CAAAA,OAAOkB,QAAQ,GAAG,IAAG,EAAGC,OAAO,CAAC,GAAG,CAAC,CAAC;QACnE,OAAO;YACLpF,WAAW;YACXiE,OAAOoB,MAAM,EAAEC,QAAQ,CAAC7D,MAAQQ,QAAQsD,KAAK,CAAC,CAAC,IAAI,EAAE9D,KAAK;QAC5D;IACF,EAAE,OAAOA,KAAK;QACZzB,WAAW,CAAC,sBAAsB,EAAEyB,IAAIC,OAAO,EAAE;QACjDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAejB,mBAAmBR,OAAO,EAAEC,KAAK;IAC9C,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOa,UAAU;QAEvB,IAAI,CAACb,OAAOgC,SAAS,IAAI;YACvBjD,WAAW;YACX2B,QAAQC,IAAI,CAAC;QACf;QAEA,MAAM4D,aAAapF,MAAMkD,IAAI,IAAIlD,MAAMmD,CAAC,IAAI;QAC5C,MAAMM,QAAQzD,MAAMyD,KAAK,IAAIzD,MAAM0D,CAAC,IAAI;QAExC7B,QAAQC,GAAG,CAAC;QAGZ,MAAM+B,SAAS,MAAMhD,OAAOiD,OAAO,CAAC;YAClCf,MAAM;YACNgB,QAAQ;gBAACqB;aAAW;YACpB3B;QACF;QAEA,IAAII,OAAOK,OAAO,EAAE;YAClBvE,aAAa;YACbkC,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC+B,OAAOM,OAAO;YAE1B,IAAIN,OAAOO,QAAQ,CAACC,MAAM,GAAG,GAAG;gBAC9BxC,QAAQC,GAAG,CAAC;gBACZ,KAAK,MAAMwC,WAAWT,OAAOO,QAAQ,CAACG,KAAK,CAAC,GAAG,IAAK;oBAClD1C,QAAQC,GAAG,CAAC,CAAC,IAAI,EAAEwC,QAAQhD,OAAO,EAAE;oBACpC,IAAIgD,QAAQK,QAAQ,EAAE;wBACpB9C,QAAQC,GAAG,CAAC,CAAC,OAAO,EAAEwC,QAAQK,QAAQ,EAAE;oBAC1C;gBACF;gBACA,IAAId,OAAOO,QAAQ,CAACC,MAAM,GAAG,IAAI;oBAC/BxC,QAAQC,GAAG,CAAC,CAAC,UAAU,EAAE+B,OAAOO,QAAQ,CAACC,MAAM,GAAG,GAAG,gBAAgB,CAAC;gBACxE;YACF;YAEAxC,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAE,AAAC+B,CAAAA,OAAOkB,QAAQ,GAAG,IAAG,EAAGC,OAAO,CAAC,GAAG,CAAC,CAAC;QACnE,OAAO;YACLpF,WAAW;YACXiE,OAAOoB,MAAM,EAAEC,QAAQ,CAAC7D,MAAQQ,QAAQsD,KAAK,CAAC,CAAC,IAAI,EAAE9D,KAAK;QAC5D;IACF,EAAE,OAAOA,KAAK;QACZzB,WAAW,CAAC,6BAA6B,EAAEyB,IAAIC,OAAO,EAAE;QACxDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAehB,cAAcT,OAAO,EAAEC,KAAK;IACzC,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOa,UAAU;QAEvB,IAAI,CAACb,OAAOgC,SAAS,IAAI;YACvBjD,WAAW;YACX2B,QAAQC,IAAI,CAAC;QACf;QAEA,MAAMgE,UAAUxF,MAAMwF,OAAO,IAAIxF,MAAMuF,CAAC;QACxC,MAAMH,aAAapF,MAAMkD,IAAI,IAAIlD,MAAMmD,CAAC,IAAI;QAE5C,IAAI,CAACqC,SAAS;YACZ5F,WAAW;YACX2B,QAAQC,IAAI,CAAC;QACf;QAEAK,QAAQC,GAAG,CAAC,CAAC,iBAAiB,EAAE0D,QAAQ,MAAM,CAAC;QAG/C,MAAM3B,SAAS,MAAMhD,OAAOiD,OAAO,CAAC;YAClCf,MAAM;YACNgB,QAAQ;gBAACqB;aAAW;YACpBhC,OAAO,CAAC,wCAAwC,EAAEoC,QAAQ;;;;;;;;;;2CAUrB,CAAC;YACtC/B,OAAO;QACT;QAEA,IAAII,OAAOK,OAAO,EAAE;YAElB,MAAMuB,eAAe5B,OAAOM,OAAO,CAACuB,WAAW;YAC/C,MAAMC,cAAcF,aAAaG,QAAQ,CAAC,kBAAkB,CAACH,aAAaG,QAAQ,CAAC,sBAAsB,CAACH,aAAaG,QAAQ,CAAC;YAGhI,MAAMC,kBAAkBhC,OAAOM,OAAO,CAAC2B,KAAK,CAAC;YAC7C,MAAMC,aAAaF,kBAAkBG,SAASH,eAAe,CAAC,EAAE,IAAKF,cAAc,KAAK;YAExF,MAAMM,aAAaN,cAAc,MAAM;YACvC9D,QAAQC,GAAG,CAAC,CAAC,QAAQ,EAAEmE,WAAW,CAAC,EAAEN,cAAc,gBAAgB,aAAa;YAChF9D,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAEiE,WAAW,CAAC,CAAC;YACxClE,QAAQC,GAAG,CAAC,CAAC,aAAa,CAAC;YAC3BD,QAAQC,GAAG,CAAC+B,OAAOM,OAAO;YAE1B,IAAIN,OAAOO,QAAQ,CAACC,MAAM,GAAG,GAAG;gBAC9BxC,QAAQC,GAAG,CAAC;gBACZ,KAAK,MAAMwC,WAAWT,OAAOO,QAAQ,CAACG,KAAK,CAAC,GAAG,GAAI;oBACjD1C,QAAQC,GAAG,CAAC,CAAC,IAAI,EAAEwC,QAAQhD,OAAO,EAAE;oBACpC,IAAIgD,QAAQK,QAAQ,EAAE;wBACpB9C,QAAQC,GAAG,CAAC,CAAC,OAAO,EAAEwC,QAAQK,QAAQ,EAAE;oBAC1C;gBACF;YACF;YAEA9C,QAAQC,GAAG,CAAC,CAAC,eAAe,EAAE,AAAC+B,CAAAA,OAAOkB,QAAQ,GAAG,IAAG,EAAGC,OAAO,CAAC,GAAG,CAAC,CAAC;QACtE,OAAO;YACLpF,WAAW;YACXiE,OAAOoB,MAAM,EAAEC,QAAQ,CAAC7D,MAAQQ,QAAQsD,KAAK,CAAC,CAAC,IAAI,EAAE9D,KAAK;QAC5D;IACF,EAAE,OAAOA,KAAK;QACZzB,WAAW,CAAC,qBAAqB,EAAEyB,IAAIC,OAAO,EAAE;QAChDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAef,YAAYV,OAAO,EAAEC,KAAK;IACvC,IAAI;QACF,MAAMa,SAAS,MAAMD;QACrB,MAAMC,OAAOa,UAAU;QAEvB,IAAI1B,MAAMkG,KAAK,EAAE;YACfrG,aAAa;YACb,MAAMgB,OAAOsF,UAAU;YACvBxG,aAAa;QACf,OAAO,IAAIK,MAAMoG,KAAK,EAAE;YACtB,MAAMA,QAAQvF,OAAOwF,aAAa;YAClCxE,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC,CAAC,aAAa,EAAEsE,MAAME,OAAO,EAAE;YAC3CzE,QAAQC,GAAG,CAAC,CAAC,aAAa,EAAEsE,MAAMG,IAAI,CAAC,MAAM,CAAC;YAC9C1E,QAAQC,GAAG,CAAC,CAAC,aAAa,EAAE,AAACsE,CAAAA,MAAMI,OAAO,GAAG,GAAE,EAAGxB,OAAO,CAAC,GAAG,CAAC,CAAC;QACjE,OAAO;YACLnD,QAAQC,GAAG,CAAC;QACd;IACF,EAAE,OAAOT,KAAK;QACZzB,WAAW,CAAC,wBAAwB,EAAEyB,IAAIC,OAAO,EAAE;QACnDC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,eAAed,YAAYX,OAAO,EAAEC,KAAK;IACvC,IAAI;QACF,IAAI,CAACA,MAAMyG,KAAK,EAAE;YAChB5G,aAAa;YACbgC,QAAQC,GAAG,CAAC;YACZ;QACF;QAEA,MAAMjB,SAAS,MAAMD;QACrB,MAAMC,OAAO6F,KAAK,CAAC;YACjBD,OAAOzG,MAAMyG,KAAK;YAClBE,WAAW3G,MAAM2G,SAAS;YAC1BC,YAAY5G,MAAM4G,UAAU,IAAI5G,KAAK,CAAC,cAAc;QACtD;IACF,EAAE,OAAOqB,KAAK;QACZzB,WAAW,CAAC,cAAc,EAAEyB,IAAIC,OAAO,EAAE;QACzCC,QAAQC,IAAI,CAAC;IACf;AACF;AAEA,SAASb;IACPkB,QAAQC,GAAG,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDf,CAAC;AACD"}